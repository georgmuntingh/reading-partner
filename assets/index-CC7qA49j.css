*,*:before,*:after{box-sizing:border-box;margin:0;padding:0}:root{--primary-color: #4f46e5;--primary-hover: #4338ca;--bg-color: #f8fafc;--surface-color: #ffffff;--text-color: #1e293b;--text-secondary: #64748b;--border-color: #e2e8f0;--highlight-bg: #fef3c7;--highlight-border: #f59e0b;--error-color: #ef4444;--success-color: #22c55e;--font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, sans-serif;--font-size-xs: .75rem;--font-size-sm: .875rem;--font-size-base: 1rem;--font-size-lg: 1.125rem;--font-size-xl: 1.25rem;--font-size-2xl: 1.5rem;--spacing-xs: .25rem;--spacing-sm: .5rem;--spacing-md: 1rem;--spacing-lg: 1.5rem;--spacing-xl: 2rem;--radius-sm: .375rem;--radius-md: .5rem;--radius-lg: .75rem;--radius-full: 9999px;--shadow-sm: 0 1px 2px 0 rgb(0 0 0 / .05);--shadow-md: 0 4px 6px -1px rgb(0 0 0 / .1);--shadow-lg: 0 10px 15px -3px rgb(0 0 0 / .1);--header-height: 56px;--controls-height: 120px}html{font-size:16px;-webkit-text-size-adjust:100%}body{font-family:var(--font-family);font-size:var(--font-size-base);line-height:1.6;color:var(--text-color);background-color:var(--bg-color);min-height:100vh;overflow-x:hidden}#app{min-height:100vh;display:flex;flex-direction:column}.screen{display:none;flex-direction:column;min-height:100vh}.screen.active{display:flex}.hidden{display:none!important}.visually-hidden{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}.btn{display:inline-flex;align-items:center;justify-content:center;padding:var(--spacing-sm) var(--spacing-lg);font-size:var(--font-size-base);font-weight:500;border:none;border-radius:var(--radius-md);cursor:pointer;transition:all .2s ease;text-decoration:none}.btn:disabled{opacity:.5;cursor:not-allowed}.btn-primary{background-color:var(--primary-color);color:#fff}.btn-primary:hover:not(:disabled){background-color:var(--primary-hover)}.btn-secondary{background-color:var(--surface-color);color:var(--text-color);border:1px solid var(--border-color)}.btn-secondary:hover:not(:disabled){background-color:var(--bg-color)}.btn-icon{display:inline-flex;align-items:center;justify-content:center;width:44px;height:44px;padding:0;background:transparent;border:none;border-radius:var(--radius-full);cursor:pointer;color:var(--text-color);transition:background-color .2s ease}.btn-icon:hover:not(:disabled){background-color:var(--border-color)}.btn-icon:disabled{opacity:.4;cursor:not-allowed}.spinner{width:40px;height:40px;border:3px solid var(--border-color);border-top-color:var(--primary-color);border-radius:50%;animation:spin .8s linear infinite}.loading{display:flex;flex-direction:column;align-items:center;gap:var(--spacing-md);padding:var(--spacing-xl)}.tts-status{position:fixed;bottom:var(--spacing-lg);left:50%;transform:translate(-50%);display:flex;align-items:center;gap:var(--spacing-md);padding:var(--spacing-md) var(--spacing-lg);background-color:var(--surface-color);border-radius:var(--radius-lg);box-shadow:var(--shadow-lg);z-index:1000}.tts-status .spinner{width:24px;height:24px;border-width:2px}.tts-status p{font-size:var(--font-size-sm);color:var(--text-secondary)}@media(max-width:480px){:root{--spacing-lg: 1rem;--spacing-xl: 1.5rem}}@media(pointer:coarse){.btn-icon{min-width:48px;min-height:48px}}@media(prefers-reduced-motion:reduce){*,*:before,*:after{animation-duration:.01ms!important;animation-iteration-count:1!important;transition-duration:.01ms!important}}.reader-header{position:fixed;top:0;left:0;right:0;height:var(--header-height);display:flex;align-items:center;justify-content:space-between;padding:0 var(--spacing-sm);background-color:var(--surface-color);border-bottom:1px solid var(--border-color);z-index:100}.nav-history-buttons{display:flex;align-items:center;gap:0;flex-shrink:0}.btn-nav-history{width:36px;height:36px;color:var(--text-color)}.btn-nav-history:disabled{opacity:.25}.book-title{flex:1;text-align:center;font-size:var(--font-size-base);font-weight:600;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;padding:0 var(--spacing-sm)}.reader-content{height:calc(100vh - var(--header-height) - var(--controls-height));margin-top:var(--header-height);padding:var(--spacing-md) var(--spacing-lg);overflow:hidden;display:flex;flex-direction:column}.chapter-header-row{display:flex;align-items:baseline;justify-content:space-between;gap:var(--spacing-sm);margin-bottom:var(--spacing-md);flex-shrink:0}.chapter-title{font-size:var(--font-size-xl);font-weight:600;color:var(--text-color);flex:1;min-width:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.page-number{font-size:var(--font-size-sm);color:var(--text-secondary);white-space:nowrap;-webkit-user-select:none;user-select:none;flex-shrink:0;background:none;border:1px solid transparent;border-radius:var(--radius-md);padding:2px 8px;cursor:pointer;transition:all .15s ease;font-family:inherit}.page-number:hover{color:var(--primary-color);border-color:var(--border-color);background-color:var(--surface-color)}.text-content{max-width:65ch;width:100%;flex:1;min-height:0;margin:0 auto;overflow:hidden;position:relative;padding:2px 50px;box-sizing:border-box;line-height:1.8;-webkit-touch-callout:none}.page-container{flex:1;display:flex;flex-direction:column;position:relative;overflow:hidden;min-height:0}.page-nav-btn{position:absolute;top:50%;transform:translateY(-50%);width:44px;height:44px;display:flex;align-items:center;justify-content:center;background-color:var(--surface-color);border:1px solid var(--border-color);border-radius:var(--radius-full);cursor:pointer;z-index:10;transition:all .2s ease;opacity:.7;box-shadow:0 2px 8px #0000001a}.page-nav-btn:hover:not(:disabled){opacity:1;background-color:var(--primary-color);color:#fff;border-color:var(--primary-color)}.page-nav-btn:disabled{opacity:.3;cursor:not-allowed}.page-nav-btn.page-nav-chapter{background-color:var(--primary-color);color:#fff;border-color:var(--primary-color);opacity:.85}.page-nav-btn.page-nav-chapter:hover{opacity:1;background-color:var(--primary-hover);border-color:var(--primary-hover)}.page-nav-prev{left:0}.page-nav-next{right:0}.btn-icon#fullscreen-btn{color:var(--text-secondary)}.epub-content{max-width:65ch;margin:0 auto;line-height:1.8}.epub-content p{margin-bottom:var(--spacing-md);text-indent:0}.epub-content h1,.epub-content h2,.epub-content h3,.epub-content h4,.epub-content h5,.epub-content h6{margin-top:var(--spacing-xl);margin-bottom:var(--spacing-md);font-weight:600;line-height:1.3}.epub-content h1{font-size:1.8em}.epub-content h2{font-size:1.5em}.epub-content h3{font-size:1.3em}.epub-content h4{font-size:1.1em}.epub-content h5{font-size:1em}.epub-content h6{font-size:.9em}.epub-content blockquote{margin:var(--spacing-md) 0;padding:var(--spacing-sm) var(--spacing-md);border-left:4px solid var(--border-color);color:var(--text-secondary);font-style:italic}.epub-content ul,.epub-content ol{margin:var(--spacing-md) 0;padding-left:var(--spacing-xl)}.epub-content li{margin-bottom:var(--spacing-xs)}.epub-content strong,.epub-content b{font-weight:600}.epub-content em,.epub-content i{font-style:italic}.epub-content img{max-width:100%;height:auto;display:block;margin:var(--spacing-lg) auto;border-radius:var(--radius-md)}.epub-content figure{margin:var(--spacing-lg) 0;text-align:center}.epub-content figcaption{margin-top:var(--spacing-sm);font-size:var(--font-size-sm);color:var(--text-secondary);font-style:italic}.epub-content svg{max-width:100%;height:auto;display:block;margin:var(--spacing-md) auto}.epub-content table{width:100%;border-collapse:collapse;margin:var(--spacing-md) 0}.epub-content th,.epub-content td{padding:var(--spacing-sm);border:1px solid var(--border-color);text-align:left}.epub-content th{background-color:var(--surface-color);font-weight:600}.epub-content a{color:var(--primary-color);text-decoration:none;cursor:pointer}.epub-content a:hover{text-decoration:underline}.link-target{background-color:#ffc8004d;outline:2px solid rgba(255,200,0,.5);outline-offset:2px;border-radius:2px;transition:background-color 2s ease-out,outline-color 2s ease-out}.epub-content pre,.epub-content code{font-family:monospace;background-color:var(--surface-color);border-radius:var(--radius-sm)}.epub-content code{padding:2px 4px;font-size:.9em}.epub-content pre{padding:var(--spacing-sm);overflow-x:auto;margin:var(--spacing-md) 0}.epub-content pre code{padding:0;background:none}.epub-content hr{border:none;border-top:1px solid var(--border-color);margin:var(--spacing-xl) 0}.sentence{display:inline;padding:2px 0;border-radius:2px;transition:background-color .2s ease,box-shadow .2s ease;cursor:pointer}.sentence:hover{background-color:#4f46e51a}.sentence.current{background-color:var(--highlight-bg);box-shadow:0 0 0 2px var(--highlight-border)}.sentence.played{color:var(--text-secondary)}.sentence.user-highlight{border-radius:2px;cursor:pointer}.sentence.highlight-yellow{background-color:#facc1559}.sentence.highlight-green{background-color:#4ade8059}.sentence.highlight-blue{background-color:#60a5fa59}.sentence.highlight-pink{background-color:#f472b659}.sentence.user-highlight.played{color:var(--text-color)}.sentence.user-highlight.current{box-shadow:0 0 0 2px var(--highlight-border)}.highlight-toolbar{position:absolute;display:flex;align-items:center;gap:4px;padding:6px 8px;background-color:var(--text-color);border-radius:var(--radius-lg);box-shadow:0 4px 12px #0000004d;z-index:500;animation:toolbar-appear .15s ease-out}@keyframes toolbar-appear{0%{opacity:0;transform:translateY(4px)}to{opacity:1;transform:translateY(0)}}.highlight-btn{display:flex;align-items:center;justify-content:center;width:32px;height:32px;border:none;border-radius:var(--radius-md);cursor:pointer;transition:transform .1s ease,opacity .1s ease;opacity:.85}.highlight-btn:hover{transform:scale(1.15);opacity:1}.highlight-btn-yellow{background-color:#facc15;color:#713f12}.highlight-btn-green{background-color:#4ade80;color:#14532d}.highlight-btn-blue{background-color:#60a5fa;color:#1e3a5f}.highlight-btn-pink{background-color:#f472b6;color:#831843}.highlight-toolbar-divider{width:1px;height:20px;background-color:#ffffff4d;margin:0 2px}.highlight-btn-lookup{background-color:#fff3;color:#fff}.paragraph{margin-bottom:var(--spacing-lg);line-height:1.8}.reader-controls{position:fixed;bottom:0;left:0;right:0;background-color:var(--surface-color);border-top:1px solid var(--border-color);padding:var(--spacing-md);z-index:100}.controls-row{display:flex;align-items:center;justify-content:center;gap:var(--spacing-sm);margin-bottom:var(--spacing-sm)}.btn-play{display:flex;align-items:center;justify-content:center;width:64px;height:64px;background-color:var(--primary-color);color:#fff;border:none;border-radius:var(--radius-full);cursor:pointer;transition:background-color .2s ease,transform .1s ease;margin:0 var(--spacing-sm)}.btn-play:hover:not(:disabled){background-color:var(--primary-hover)}.btn-play:active:not(:disabled){transform:scale(.95)}.btn-play:disabled{opacity:.5;cursor:not-allowed}.btn-play.buffering{position:relative;pointer-events:none}.btn-play.buffering:after{content:"";position:absolute;width:32px;height:32px;border:3px solid rgba(255,255,255,.3);border-top-color:#fff;border-radius:50%;animation:spin .8s linear infinite}.btn-ask{color:var(--primary-color)}.controls-settings{display:flex;flex-direction:column;gap:var(--spacing-xs);padding:0 var(--spacing-md)}.setting-row{display:flex;align-items:center;justify-content:center;gap:var(--spacing-sm)}.setting-label{font-size:var(--font-size-sm);color:var(--text-secondary);min-width:45px;text-align:right}.voice-select{flex:1;max-width:200px;padding:var(--spacing-xs) var(--spacing-sm);font-size:var(--font-size-sm);border:1px solid var(--border-color);border-radius:var(--radius-md);background-color:var(--surface-color);color:var(--text-color);cursor:pointer}.voice-select:focus{outline:none;border-color:var(--primary-color);box-shadow:0 0 0 2px #4f46e51a}.speed-value{font-size:var(--font-size-sm);font-weight:500;min-width:3ch}#speed-slider{flex:1;max-width:150px;accent-color:var(--primary-color)}.speed-row{display:flex;align-items:center;justify-content:center;gap:var(--spacing-sm)}.speed-label{font-size:var(--font-size-sm);color:var(--text-secondary)}.text-content.multi-column-hidden{position:absolute!important;visibility:hidden!important;pointer-events:none!important;z-index:-1;top:0;left:0;right:0}.multi-column-container{display:flex;flex:1;min-height:0;gap:24px;overflow:hidden}.multi-column-container.multi-column-inactive{display:none}.column-viewport{flex:1;min-width:0;overflow:hidden;position:relative}.column-viewport.column-empty{opacity:0}.column-content{width:100%;height:100%;overflow:hidden}.column-page-content{max-width:none;width:100%;margin:0}.page-content{column-count:1}.text-content.loading{display:flex;align-items:center;justify-content:center;min-height:200px;color:var(--text-secondary)}@media(max-width:480px){.reader-content{padding:var(--spacing-sm) var(--spacing-md)}.controls-row{gap:var(--spacing-xs)}.btn-play{width:56px;height:56px}#speed-slider{width:100px}.page-nav-btn{width:36px;height:36px}.page-nav-prev{left:-4px}.page-nav-next{right:-4px}}@supports (padding-bottom: env(safe-area-inset-bottom)){.reader-controls{padding-bottom:calc(var(--spacing-md) + env(safe-area-inset-bottom))}}.upload-container{flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:var(--spacing-xl);text-align:center}.upload-container h1{font-size:var(--font-size-2xl);font-weight:700;margin-bottom:var(--spacing-sm);color:var(--text-color)}.upload-container .subtitle{font-size:var(--font-size-base);color:var(--text-secondary);margin-bottom:var(--spacing-xl)}.upload-area{display:flex;flex-direction:column;align-items:center;justify-content:center;width:100%;max-width:400px;padding:var(--spacing-xl);border:2px dashed var(--border-color);border-radius:var(--radius-lg);background-color:var(--surface-color);cursor:pointer;transition:border-color .2s ease,background-color .2s ease}.upload-area:hover,.upload-area.dragover{border-color:var(--primary-color);background-color:#4f46e50d}.upload-icon{color:var(--text-secondary);margin-bottom:var(--spacing-md)}.upload-area p{color:var(--text-secondary);margin-bottom:var(--spacing-sm)}.upload-area .or{font-size:var(--font-size-sm);color:var(--text-secondary);margin:var(--spacing-sm) 0}.divider{display:flex;align-items:center;width:100%;max-width:400px;margin:var(--spacing-xl) 0;text-align:center}.divider:before,.divider:after{content:"";flex:1;border-bottom:1px solid var(--border-color)}.divider span{padding:0 var(--spacing-md);color:var(--text-secondary);font-size:var(--font-size-sm);font-weight:500}.gutenberg-area{width:100%;max-width:400px;padding:var(--spacing-lg);background-color:var(--surface-color);border:1px solid var(--border-color);border-radius:var(--radius-lg);margin-bottom:var(--spacing-lg)}.gutenberg-title{font-size:var(--font-size-lg);font-weight:600;margin-bottom:var(--spacing-xs);color:var(--text-color)}.gutenberg-subtitle{font-size:var(--font-size-sm);color:var(--text-secondary);margin-bottom:var(--spacing-md)}.gutenberg-input-group{display:flex;gap:var(--spacing-sm)}.gutenberg-input-group .form-input{flex:1}.gutenberg-input-group .btn{flex-shrink:0}.resume-section{display:flex;flex-direction:column;width:100%;max-width:400px;margin-bottom:var(--spacing-lg)}.resume-section-title{font-weight:600;font-size:var(--font-size-base);color:var(--text-color);margin-bottom:var(--spacing-sm)}.resume-banner{display:flex;align-items:center;justify-content:space-between;gap:var(--spacing-md);width:100%;padding:var(--spacing-sm) var(--spacing-md);background-color:var(--surface-color);border:1px solid var(--primary-color);text-align:left}.resume-section .resume-banner:first-of-type{border-top-left-radius:var(--radius-md);border-top-right-radius:var(--radius-md)}.resume-section .resume-banner:last-of-type{border-bottom-left-radius:var(--radius-md);border-bottom-right-radius:var(--radius-md)}.resume-section .resume-banner+.resume-banner{border-top:none}.resume-info{flex:1;overflow:hidden}.resume-detail{font-size:var(--font-size-sm);color:var(--text-secondary);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.resume-time{font-size:var(--font-size-xs);color:var(--text-secondary);margin-top:2px}.resume-btn{flex-shrink:0}.error-message{display:flex;align-items:center;gap:var(--spacing-sm);padding:var(--spacing-md);margin-top:var(--spacing-lg);background-color:#fef2f2;border:1px solid #fecaca;border-radius:var(--radius-md);color:var(--error-color);font-size:var(--font-size-sm)}.error-message svg{flex-shrink:0}.nav-panel{position:fixed;top:0;left:0;bottom:0;width:320px;max-width:85vw;background-color:var(--surface-color);box-shadow:var(--shadow-lg);transform:translate(-100%);transition:transform .3s ease;z-index:200;overflow-y:auto;display:flex;flex-direction:column}.nav-panel.active{transform:translate(0)}.nav-header{display:flex;align-items:center;justify-content:space-between;padding:var(--spacing-lg);border-bottom:1px solid var(--border-color);flex-shrink:0}.nav-header h2{font-size:var(--font-size-lg);font-weight:600;margin:0}.nav-close-btn{background:none;border:none;color:var(--text-secondary);cursor:pointer;padding:var(--spacing-xs);display:flex;align-items:center;justify-content:center;border-radius:var(--radius-md);transition:background-color .2s ease}.nav-close-btn:hover{background-color:var(--bg-color)}.nav-section{padding:var(--spacing-lg);border-bottom:1px solid var(--border-color)}.nav-section:last-child{border-bottom:none}.nav-section h3{font-size:var(--font-size-base);font-weight:600;margin:0 0 var(--spacing-md) 0;color:var(--text-secondary);text-transform:uppercase;letter-spacing:.05em}.nav-list{display:flex;flex-direction:column;gap:var(--spacing-xs)}.nav-item{padding:var(--spacing-sm) var(--spacing-md);border-radius:var(--radius-md);cursor:pointer;transition:background-color .2s ease;display:flex;align-items:center;gap:var(--spacing-sm)}.nav-item:hover{background-color:var(--bg-color)}.nav-item.active{background-color:#4f46e51a;color:var(--primary-color);font-weight:500}.nav-item .chapter-number{color:var(--text-secondary);font-size:var(--font-size-sm);flex-shrink:0}.nav-item.active .chapter-number{color:var(--primary-color)}.nav-item .chapter-title{flex:1;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.nav-empty{padding:var(--spacing-lg);text-align:center;color:var(--text-secondary);font-size:var(--font-size-sm);font-style:italic}.bookmark-item{flex-direction:row;padding:var(--spacing-sm)}.bookmark-content{flex:1;display:flex;align-items:flex-start;gap:var(--spacing-sm);cursor:pointer}.bookmark-icon{font-size:18px;flex-shrink:0}.bookmark-details{flex:1;overflow:hidden}.bookmark-chapter{font-size:var(--font-size-sm);font-weight:500;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.bookmark-note{font-size:var(--font-size-xs);color:var(--text-secondary);margin-top:2px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.bookmark-delete-btn{background:none;border:none;color:var(--text-secondary);cursor:pointer;padding:var(--spacing-xs);display:flex;align-items:center;justify-content:center;border-radius:var(--radius-sm);transition:background-color .2s ease,color .2s ease;flex-shrink:0}.bookmark-delete-btn:hover{background-color:#fef2f2;color:var(--error-color)}.highlight-item{flex-direction:row;padding:var(--spacing-sm)}.highlight-nav-content{flex:1;display:flex;align-items:flex-start;gap:var(--spacing-sm);cursor:pointer}.highlight-color-indicator{width:4px;min-height:100%;border-radius:2px;flex-shrink:0;align-self:stretch}.highlight-color-yellow{background-color:#facc15}.highlight-color-green{background-color:#4ade80}.highlight-color-blue{background-color:#60a5fa}.highlight-color-pink{background-color:#f472b6}.highlight-nav-details{flex:1;overflow:hidden}.highlight-nav-chapter{font-size:var(--font-size-sm);font-weight:500;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.highlight-nav-text{font-size:var(--font-size-xs);color:var(--text-secondary);margin-top:2px;line-height:1.4;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;font-style:italic}.highlight-delete-btn{background:none;border:none;color:var(--text-secondary);cursor:pointer;padding:var(--spacing-xs);display:flex;align-items:center;justify-content:center;border-radius:var(--radius-sm);transition:background-color .2s ease,color .2s ease;flex-shrink:0}.highlight-delete-btn:hover{background-color:#fef2f2;color:var(--error-color)}.quiz-history-chapter{margin-top:var(--spacing-sm)}.quiz-history-chapter:first-child{margin-top:0}.quiz-history-chapter-title{font-size:var(--font-size-sm);font-weight:600;color:var(--primary-color);padding:var(--spacing-xs) var(--spacing-sm);background-color:#4f46e50d;border-radius:var(--radius-sm);margin-bottom:var(--spacing-xs)}.quiz-history-item{padding:var(--spacing-sm) var(--spacing-md);border-left:3px solid var(--border-color);margin-left:var(--spacing-xs);margin-bottom:var(--spacing-xs)}.quiz-history-question{font-size:var(--font-size-sm);color:var(--text-color);line-height:1.5;margin-bottom:var(--spacing-xs)}.quiz-history-q-num{font-weight:600;color:var(--text-secondary);margin-right:2px}.quiz-history-correct{color:#059669;font-weight:700;margin-right:var(--spacing-xs)}.quiz-history-incorrect{color:#dc2626;font-weight:700;margin-right:var(--spacing-xs)}.quiz-history-answer{font-size:var(--font-size-xs);color:var(--text-secondary);line-height:1.4;padding-left:var(--spacing-sm)}.quiz-history-answer strong{color:var(--text-color);font-weight:500}#add-bookmark-btn{width:100%;margin-top:var(--spacing-md);display:flex;align-items:center;justify-content:center;gap:var(--spacing-xs)}.nav-overlay{position:fixed;top:0;right:0;bottom:0;left:0;background-color:#00000080;opacity:0;visibility:hidden;transition:opacity .3s ease,visibility .3s ease;z-index:199}.nav-overlay.active{opacity:1;visibility:visible}.qa-setup{width:100%;max-width:400px;margin-bottom:var(--spacing-lg)}.qa-setup-details{background-color:var(--surface-color);border:1px solid var(--border-color);border-radius:var(--radius-md);overflow:hidden}.qa-setup-summary{display:flex;align-items:center;justify-content:space-between;padding:var(--spacing-md);cursor:pointer;-webkit-user-select:none;user-select:none}.qa-setup-summary::-webkit-details-marker{display:none}.qa-setup-title{font-weight:500;color:var(--text-color)}.qa-setup-status{font-size:var(--font-size-sm);color:var(--text-secondary);padding:2px 8px;background-color:var(--bg-color);border-radius:var(--radius-sm)}.qa-setup-status.configured{color:var(--success-color, #10b981);background-color:#10b9811a}.qa-setup-content{padding:var(--spacing-md);padding-top:0;border-top:1px solid var(--border-color)}.qa-setup-details[open] .qa-setup-content{padding-top:var(--spacing-md)}.qa-overlay{position:fixed;top:0;right:0;bottom:0;left:0;display:flex;align-items:center;justify-content:center;background-color:#000000b3;z-index:300;padding:var(--spacing-lg);opacity:0;visibility:hidden;transition:opacity .3s ease,visibility .3s ease}.qa-overlay.active{opacity:1;visibility:visible}.qa-dialog{width:100%;max-width:500px;max-height:90vh;background-color:var(--surface-color);border-radius:var(--radius-lg);display:flex;flex-direction:column;overflow:hidden}.qa-header{display:flex;align-items:center;justify-content:space-between;padding:var(--spacing-md) var(--spacing-lg);border-bottom:1px solid var(--border-color)}.qa-title{font-size:var(--font-size-lg);font-weight:600;margin:0}.qa-close-btn{background:none;border:none;color:var(--text-secondary);cursor:pointer;padding:var(--spacing-xs);display:flex;align-items:center;justify-content:center;border-radius:var(--radius-md);transition:background-color .2s ease}.qa-close-btn:hover{background-color:var(--bg-color)}.qa-content{flex:1;padding:var(--spacing-lg);overflow-y:auto}.qa-status-section{text-align:center;margin-bottom:var(--spacing-lg)}.qa-icon{display:flex;align-items:center;justify-content:center;height:64px;margin-bottom:var(--spacing-md);color:var(--primary-color)}.qa-icon-emoji{font-size:48px}.qa-icon svg{color:var(--primary-color)}.qa-status{font-size:var(--font-size-lg);font-weight:600;color:var(--text-color)}.qa-label{display:block;font-size:var(--font-size-sm);font-weight:500;color:var(--text-secondary);margin-bottom:var(--spacing-sm);text-transform:uppercase;letter-spacing:.05em}.qa-transcript-section,.qa-response-section,.qa-text-input-section,.qa-history-section{margin-bottom:var(--spacing-lg)}.qa-transcript,.qa-response{font-size:var(--font-size-base);color:var(--text-color);padding:var(--spacing-md);background-color:var(--bg-color);border-radius:var(--radius-md);min-height:60px;max-height:200px;overflow-y:auto;line-height:1.6}.qa-response{white-space:pre-wrap}.qa-text-input-wrapper{display:flex;gap:var(--spacing-sm);margin-bottom:var(--spacing-sm)}.qa-text-input{flex:1;padding:var(--spacing-sm) var(--spacing-md);font-size:var(--font-size-base);border:1px solid var(--border-color);border-radius:var(--radius-md);background-color:var(--surface-color);color:var(--text-color)}.qa-text-input:focus{outline:none;border-color:var(--primary-color);box-shadow:0 0 0 3px #4f46e51a}.qa-submit-btn{flex-shrink:0}.qa-retry-voice-btn{width:100%;display:flex;align-items:center;justify-content:center;gap:var(--spacing-xs)}.qa-history-nav{display:flex;align-items:center;justify-content:center;gap:var(--spacing-md);margin-bottom:var(--spacing-md)}.qa-history-counter{font-size:var(--font-size-sm);color:var(--text-secondary)}.qa-history-item{background-color:var(--bg-color);border-radius:var(--radius-md);padding:var(--spacing-md)}.qa-history-question{font-weight:500;margin-bottom:var(--spacing-sm);color:var(--text-color)}.qa-history-question:before{content:"Q: ";color:var(--primary-color)}.qa-history-answer{color:var(--text-secondary);font-size:var(--font-size-sm);line-height:1.5}.qa-history-answer:before{content:"A: ";color:var(--text-secondary);font-weight:500}.qa-controls{display:flex;flex-wrap:wrap;gap:var(--spacing-sm);padding:var(--spacing-md) var(--spacing-lg);border-top:1px solid var(--border-color);justify-content:center;align-items:center}.qa-controls .btn{min-width:auto}.qa-controls .btn:not(.btn-icon-text){min-width:100px}.btn-icon-text{display:inline-flex;align-items:center;justify-content:center;width:44px;height:44px;padding:0;border-radius:var(--radius-full)}.btn-icon-text svg{flex-shrink:0}.qa-listening-animation{display:flex;align-items:center;justify-content:center;gap:6px;height:48px}.qa-listening-animation span{display:block;width:8px;height:8px;background-color:var(--primary-color);border-radius:50%;animation:listening-pulse 1.4s ease-in-out infinite}.qa-listening-animation span:nth-child(1){animation-delay:0s}.qa-listening-animation span:nth-child(2){animation-delay:.2s}.qa-listening-animation span:nth-child(3){animation-delay:.4s}@keyframes listening-pulse{0%,80%,to{transform:scale(1);opacity:.5}40%{transform:scale(1.5);opacity:1}}.quiz-overlay{position:fixed;top:0;right:0;bottom:0;left:0;display:flex;align-items:center;justify-content:center;background-color:#000000b3;z-index:300;padding:var(--spacing-lg);opacity:0;visibility:hidden;transition:opacity .3s ease,visibility .3s ease}.quiz-overlay.active{opacity:1;visibility:visible}.quiz-dialog{width:100%;max-width:520px;max-height:90vh;background-color:var(--surface-color);border-radius:var(--radius-lg);display:flex;flex-direction:column;overflow:hidden}.quiz-header{display:flex;align-items:center;justify-content:space-between;padding:var(--spacing-md) var(--spacing-lg);border-bottom:1px solid var(--border-color)}.quiz-title{font-size:var(--font-size-lg);font-weight:600;margin:0}.quiz-close-btn{background:none;border:none;color:var(--text-secondary);cursor:pointer;padding:var(--spacing-xs);display:flex;align-items:center;justify-content:center;border-radius:var(--radius-md);transition:background-color .2s ease}.quiz-close-btn:hover{background-color:var(--bg-color)}.quiz-content{flex:1;padding:var(--spacing-lg);overflow-y:auto}.quiz-status-section{text-align:center;margin-bottom:var(--spacing-lg)}.quiz-icon{display:flex;align-items:center;justify-content:center;height:64px;margin-bottom:var(--spacing-md);color:var(--primary-color)}.quiz-icon-emoji{font-size:48px}.quiz-icon svg{color:var(--primary-color)}.quiz-status{font-size:var(--font-size-lg);font-weight:600;color:var(--text-color)}.quiz-question-section{margin-bottom:var(--spacing-lg)}.quiz-question-text{font-size:var(--font-size-base);font-weight:500;color:var(--text-color);line-height:1.6;padding:var(--spacing-md);background-color:var(--bg-color);border-radius:var(--radius-md);border-left:4px solid var(--primary-color)}.quiz-options-section{display:flex;flex-direction:column;gap:var(--spacing-sm);margin-bottom:var(--spacing-lg)}.quiz-option{display:flex;align-items:flex-start;gap:var(--spacing-sm);padding:var(--spacing-md);background-color:var(--surface-color);border:2px solid var(--border-color);border-radius:var(--radius-md);cursor:pointer;text-align:left;font-size:var(--font-size-base);color:var(--text-color);transition:border-color .2s ease,background-color .2s ease;line-height:1.5}.quiz-option:hover:not(:disabled){border-color:var(--primary-color);background-color:#4f46e50d}.quiz-option:disabled{cursor:not-allowed;opacity:.6}.quiz-option-label{font-weight:600;color:var(--primary-color);flex-shrink:0}.quiz-option-correct{border-color:#059669;background-color:#0596691a}.quiz-option-correct .quiz-option-label{color:#059669}.quiz-option-incorrect{border-color:#dc2626;background-color:#dc26261a}.quiz-option-incorrect .quiz-option-label{color:#dc2626}.quiz-input-section{margin-bottom:var(--spacing-lg)}.quiz-text-input-wrapper{display:flex;gap:var(--spacing-sm);margin-bottom:var(--spacing-sm)}.quiz-text-input{flex:1;padding:var(--spacing-sm) var(--spacing-md);font-size:var(--font-size-base);border:1px solid var(--border-color);border-radius:var(--radius-md);background-color:var(--surface-color);color:var(--text-color)}.quiz-text-input:focus{outline:none;border-color:var(--primary-color);box-shadow:0 0 0 3px #4f46e51a}.quiz-text-input:disabled{opacity:.5;cursor:not-allowed}.quiz-submit-btn{flex-shrink:0}.quiz-mic-btn{width:100%;display:flex;align-items:center;justify-content:center;gap:var(--spacing-xs)}.quiz-transcript-section{margin-bottom:var(--spacing-lg)}.quiz-transcript{font-size:var(--font-size-base);color:var(--text-color);padding:var(--spacing-md);background-color:var(--bg-color);border-radius:var(--radius-md);min-height:40px;max-height:120px;overflow-y:auto;line-height:1.6;border-left:4px solid var(--primary-color);font-style:italic}.quiz-feedback-section{margin-bottom:var(--spacing-lg)}.quiz-label{display:block;font-size:var(--font-size-sm);font-weight:500;color:var(--text-secondary);margin-bottom:var(--spacing-sm);text-transform:uppercase;letter-spacing:.05em}.quiz-feedback{font-size:var(--font-size-base);color:var(--text-color);padding:var(--spacing-md);background-color:var(--bg-color);border-radius:var(--radius-md);min-height:40px;max-height:200px;overflow-y:auto;line-height:1.6;white-space:pre-wrap}.quiz-controls{display:flex;flex-wrap:wrap;gap:var(--spacing-sm);padding:var(--spacing-md) var(--spacing-lg);border-top:1px solid var(--border-color);justify-content:center;align-items:center}.quiz-controls .btn{min-width:100px}.toast{position:fixed;bottom:calc(var(--controls-height) + var(--spacing-lg));left:50%;transform:translate(-50%) translateY(100px);padding:var(--spacing-md) var(--spacing-lg);background-color:var(--text-color);color:#fff;border-radius:var(--radius-md);font-size:var(--font-size-sm);opacity:0;transition:transform .3s ease,opacity .3s ease;z-index:400}.toast.show{transform:translate(-50%) translateY(0);opacity:1}.progress-bar{width:100%;max-width:300px;height:8px;background-color:var(--border-color);border-radius:var(--radius-full);overflow:hidden;margin-top:var(--spacing-md)}.progress-bar-fill{height:100%;background-color:var(--primary-color);border-radius:var(--radius-full);transition:width .3s ease}.modal-overlay{position:fixed;top:0;right:0;bottom:0;left:0;display:flex;align-items:center;justify-content:center;background-color:#00000080;z-index:300;padding:var(--spacing-lg);opacity:0;visibility:hidden;transition:opacity .3s ease,visibility .3s ease}.modal-overlay.active{opacity:1;visibility:visible}.modal{width:100%;max-width:480px;max-height:90vh;background-color:var(--surface-color);border-radius:var(--radius-lg);overflow:hidden;display:flex;flex-direction:column}.modal-header{display:flex;align-items:center;justify-content:space-between;padding:var(--spacing-md) var(--spacing-lg);border-bottom:1px solid var(--border-color)}.modal-header h2{font-size:var(--font-size-lg);font-weight:600}.modal-content{flex:1;padding:var(--spacing-lg);overflow-y:auto}.modal-footer{padding:var(--spacing-md) var(--spacing-lg);border-top:1px solid var(--border-color);display:flex;justify-content:flex-end;gap:var(--spacing-sm)}.form-group{margin-bottom:var(--spacing-lg)}.form-group:last-child{margin-bottom:0}.form-group label{display:block;font-size:var(--font-size-sm);font-weight:500;margin-bottom:var(--spacing-sm);color:var(--text-color)}.form-input,.form-select,.form-group input[type=text],.form-group input[type=number],.form-group input[type=password],.form-group select{width:100%;padding:var(--spacing-sm) var(--spacing-md);font-size:var(--font-size-base);border:1px solid var(--border-color);border-radius:var(--radius-md);background-color:var(--surface-color);color:var(--text-color)}.form-input:focus,.form-select:focus,.form-group input:focus,.form-group select:focus{outline:none;border-color:var(--primary-color);box-shadow:0 0 0 3px #4f46e51a}.form-hint{font-size:var(--font-size-sm);color:var(--text-secondary);margin-top:var(--spacing-xs)}.form-hint a{color:var(--primary-color);text-decoration:none}.form-hint a:hover{text-decoration:underline}.settings-section{margin-bottom:var(--spacing-xl)}.settings-section:last-child{margin-bottom:0}.settings-section h3{font-size:var(--font-size-base);font-weight:600;margin:0 0 var(--spacing-md) 0;color:var(--text-color);padding-bottom:var(--spacing-sm);border-bottom:1px solid var(--border-color)}.chapter-overview{position:fixed;top:0;left:0;right:0;bottom:0;z-index:1000;background-color:#0009;opacity:0;transition:opacity .2s ease}.chapter-overview.active{opacity:1}.chapter-overview-overlay{display:flex;flex-direction:column;width:100%;height:100%;background-color:var(--bg-color)}.chapter-overview-header{flex-shrink:0;padding:var(--spacing-md) var(--spacing-lg);border-bottom:1px solid var(--border-color);background-color:var(--surface-color)}.chapter-overview-title-row{display:flex;align-items:center;justify-content:space-between;margin-bottom:var(--spacing-sm)}.chapter-overview-title-row h2{font-size:var(--font-size-lg);font-weight:600;margin:0;color:var(--text-color)}.chapter-overview-close-btn{color:var(--text-secondary)}.chapter-overview-chapter-select{display:flex;align-items:center;gap:var(--spacing-sm)}.chapter-overview-select{flex:1;padding:var(--spacing-xs) var(--spacing-sm);border:1px solid var(--border-color);border-radius:var(--radius-md);background-color:var(--surface-color);color:var(--text-color);font-size:var(--font-size-sm);max-width:100%}.chapter-overview-grid{flex:1;overflow-y:auto;padding:var(--spacing-lg);display:grid;grid-template-columns:repeat(auto-fill,minmax(180px,1fr));gap:var(--spacing-lg);align-content:start}.chapter-overview-empty{grid-column:1 / -1;text-align:center;color:var(--text-secondary);padding:var(--spacing-xl)}.chapter-overview-thumbnail{display:flex;flex-direction:column;align-items:center;cursor:pointer;border-radius:var(--radius-lg);padding:var(--spacing-sm);transition:all .15s ease;position:relative;background-color:var(--surface-color);border:2px solid transparent}.chapter-overview-thumbnail:hover{background-color:var(--bg-color);border-color:var(--border-color);transform:translateY(-2px);box-shadow:0 4px 12px #0000001a}.chapter-overview-thumbnail.current-page{border-color:var(--primary-color);box-shadow:0 0 0 1px var(--primary-color)}.chapter-overview-thumbnail.read-page .chapter-overview-preview{opacity:.6}.chapter-overview-thumbnail.read-page .chapter-overview-page-label{color:var(--text-secondary)}.chapter-overview-preview{border-radius:var(--radius-md);overflow:hidden;background-color:#fff;border:1px solid var(--border-color)}.chapter-overview-page-label{margin-top:var(--spacing-xs);font-size:var(--font-size-xs);color:var(--text-color);font-weight:500}.chapter-overview-badges{display:flex;gap:4px;position:absolute;top:4px;right:4px}.chapter-overview-badge{display:flex;align-items:center;justify-content:center;width:18px;height:18px;border-radius:50%;background-color:#fff;box-shadow:0 1px 3px #0003}.chapter-overview-badge.bookmark-badge{color:var(--primary-color)}.chapter-overview-badge.highlight-badge{color:var(--highlight-border)}.chapter-overview-clone{max-width:none!important}.column-count-buttons{display:flex;gap:var(--spacing-xs);margin-top:var(--spacing-xs)}.column-count-btn{display:flex;align-items:center;justify-content:center;width:40px;height:36px;border:1px solid var(--border-color);border-radius:var(--radius-md);background-color:var(--surface-color);color:var(--text-color);font-size:var(--font-size-base);font-weight:500;cursor:pointer;transition:all .15s ease}.column-count-btn:hover{border-color:var(--primary-color);color:var(--primary-color)}.column-count-btn.active{background-color:var(--primary-color);border-color:var(--primary-color);color:#fff}.image-viewer-modal{position:fixed;top:0;right:0;bottom:0;left:0;background-color:#000000f2;z-index:400;display:flex;align-items:center;justify-content:center;opacity:0;visibility:hidden;transition:opacity .3s ease,visibility .3s ease}.image-viewer-modal.active{opacity:1;visibility:visible}.image-viewer-content{position:relative;width:100%;height:100%;display:flex;align-items:center;justify-content:center}.image-viewer-close-btn{position:absolute;top:20px;right:20px;z-index:10;background-color:#0009;color:#fff;border:none;border-radius:var(--radius-md);padding:var(--spacing-sm);cursor:pointer;transition:background-color .2s ease}.image-viewer-close-btn:hover{background-color:#000c}.image-viewer-controls{position:absolute;top:20px;left:20px;z-index:10;display:flex;gap:var(--spacing-xs)}.image-viewer-controls .btn-icon{background-color:#0009;color:#fff;border:none;border-radius:var(--radius-md);padding:var(--spacing-sm);cursor:pointer;transition:background-color .2s ease}.image-viewer-controls .btn-icon:hover{background-color:#000c}.image-viewer-canvas{width:100%;height:100%;display:flex;align-items:center;justify-content:center;overflow:hidden;cursor:default}.image-viewer-canvas img{max-width:90%;max-height:90%;object-fit:contain;transform-origin:center;transition:transform .1s ease-out;-webkit-user-select:none;user-select:none;-webkit-user-drag:none}.about-content{font-size:var(--font-size-sm);color:var(--text-secondary)}.about-info p{margin-bottom:var(--spacing-sm);line-height:1.6}.about-info p:last-child{margin-bottom:0}.about-info strong{color:var(--text-color);font-weight:600}.about-info code{font-family:Courier New,monospace;background-color:var(--border-color);padding:2px 6px;border-radius:var(--radius-sm);font-size:.9em}.btn-sm{padding:var(--spacing-xs) var(--spacing-md);font-size:var(--font-size-sm)}.render-progress{display:flex;align-items:center;justify-content:center;padding:var(--spacing-xl);color:var(--text-secondary);font-size:var(--font-size-sm)}.render-progress span{background:var(--bg-color);padding:var(--spacing-sm) var(--spacing-md);border-radius:var(--radius-md);border:1px solid var(--border-color)}.content-indicator{text-align:center;padding:var(--spacing-md);color:var(--text-secondary);font-size:var(--font-size-sm);font-style:italic;border:1px dashed var(--border-color);border-radius:var(--radius-md);margin:var(--spacing-md) 0;background:var(--bg-color)}.book-loader-modal{max-width:520px}.modal-continue-reading{margin-bottom:var(--spacing-lg)}.modal-continue-reading-title{font-weight:600;font-size:var(--font-size-base);color:var(--text-color);margin-bottom:var(--spacing-sm)}.modal-continue-reading-list{display:flex;flex-direction:column}.modal-resume-item{display:flex;align-items:center;justify-content:space-between;gap:var(--spacing-md);padding:var(--spacing-sm) var(--spacing-md);background-color:var(--surface-color);border:1px solid var(--primary-color)}.modal-resume-item:first-child{border-top-left-radius:var(--radius-md);border-top-right-radius:var(--radius-md)}.modal-resume-item:last-child{border-bottom-left-radius:var(--radius-md);border-bottom-right-radius:var(--radius-md)}.modal-resume-item+.modal-resume-item{border-top:none}.book-source-option{padding:var(--spacing-lg);border:1px solid var(--border-color);border-radius:var(--radius-lg);background-color:var(--bg-color);transition:border-color .2s ease,box-shadow .2s ease}.book-source-option:hover{border-color:var(--primary-color);box-shadow:0 0 0 3px #4f46e51a}.book-source-header{display:flex;align-items:flex-start;gap:var(--spacing-md);margin-bottom:var(--spacing-md)}.book-source-icon{flex-shrink:0;width:48px;height:48px;display:flex;align-items:center;justify-content:center;background-color:#4f46e51a;border-radius:var(--radius-md);color:var(--primary-color)}.book-source-info h3{font-size:var(--font-size-base);font-weight:600;margin:0 0 var(--spacing-xs) 0;color:var(--text-color)}.book-source-info p{font-size:var(--font-size-sm);color:var(--text-secondary);margin:0}.book-source-btn{width:100%}.book-source-divider{display:flex;align-items:center;gap:var(--spacing-md);margin:var(--spacing-lg) 0;color:var(--text-secondary);font-size:var(--font-size-sm)}.book-source-divider:before,.book-source-divider:after{content:"";flex:1;height:1px;background-color:var(--border-color)}.gutenberg-input-row{display:flex;gap:var(--spacing-sm);margin-bottom:var(--spacing-sm)}.gutenberg-input-row .form-input{flex:1}.gutenberg-hint{margin-top:var(--spacing-xs)}.gutenberg-hint a{color:var(--primary-color);text-decoration:none}.gutenberg-hint a:hover{text-decoration:underline}.book-loader-loading{display:flex;align-items:center;justify-content:center;gap:var(--spacing-md);padding:var(--spacing-lg);margin-top:var(--spacing-lg);border-top:1px solid var(--border-color)}.book-loader-loading .spinner{width:24px;height:24px}.book-loader-loading p{margin:0;color:var(--text-secondary)}.book-loader-error{display:flex;align-items:center;gap:var(--spacing-sm);padding:var(--spacing-md);margin-top:var(--spacing-md);background-color:#ef44441a;border:1px solid rgba(239,68,68,.3);border-radius:var(--radius-md);color:#dc2626;font-size:var(--font-size-sm)}.book-loader-error svg{flex-shrink:0}.upload-hint{font-size:var(--font-size-sm);color:var(--text-secondary);margin-top:var(--spacing-sm)}.btn-lg{padding:var(--spacing-md) var(--spacing-xl);font-size:var(--font-size-base)}.resume-source{color:var(--primary-color);font-size:var(--font-size-xs);font-weight:500}.upload-formats{display:flex;gap:var(--spacing-xs);justify-content:center;margin-bottom:var(--spacing-sm)}.format-badge{display:inline-flex;align-items:center;padding:2px 8px;font-size:var(--font-size-xs);font-weight:600;border-radius:var(--radius-sm);letter-spacing:.03em;line-height:1.6}.format-badge-sm{padding:1px 6px;font-size:.65rem;vertical-align:middle;margin-right:4px}.format-epub{background-color:#dbeafe;color:#1e40af}.format-markdown,.format-md{background-color:#dcfce7;color:#166534}.format-html{background-color:#fef3c7;color:#92400e}.format-pdf{background-color:#fce7f3;color:#9d174d}.url-input-row{display:flex;gap:var(--spacing-sm);margin-bottom:var(--spacing-sm)}.url-input-row .form-input{flex:1}.url-hint{margin-top:var(--spacing-xs)}.paste-toggle-wrapper{text-align:center;margin-top:var(--spacing-sm)}.paste-toggle-btn{background:none;border:none;color:var(--primary-color);font-size:var(--font-size-sm);cursor:pointer;padding:var(--spacing-xs) var(--spacing-sm);transition:color .2s ease}.paste-toggle-btn:hover{color:var(--primary-hover);text-decoration:underline}.paste-text-section{margin-top:var(--spacing-md);display:flex;flex-direction:column;gap:var(--spacing-sm)}.paste-title-row{display:flex}.paste-title-row .form-input{width:100%}.paste-text-input{width:100%;min-height:150px;max-height:300px;padding:var(--spacing-sm) var(--spacing-md);font-size:var(--font-size-sm);font-family:inherit;border:1px solid var(--border-color);border-radius:var(--radius-md);background-color:var(--surface-color);color:var(--text-color);resize:vertical;line-height:1.5}.paste-text-input:focus{outline:none;border-color:var(--primary-color);box-shadow:0 0 0 3px #4f46e51a}.paste-text-input::placeholder{color:var(--text-secondary)}.paste-meta-row{display:flex;align-items:center;justify-content:space-between;gap:var(--spacing-sm)}.paste-format-badge{display:inline-flex;align-items:center;padding:2px 8px;font-size:var(--font-size-xs);font-weight:600;border-radius:var(--radius-sm);background-color:var(--bg-color);color:var(--text-secondary);letter-spacing:.03em}.paste-format-html{background-color:#fef3c7;color:#92400e}.paste-format-markdown{background-color:#dcfce7;color:#166534}.paste-format-plaintext{background-color:#f0f0f0;color:#555}.paste-char-count{font-size:var(--font-size-xs);color:var(--text-secondary)}.paste-char-over{color:var(--error-color, #dc2626);font-weight:600}.paste-preview-section{border:1px solid var(--border-color);border-radius:var(--radius-md);overflow:hidden}.paste-preview-label{font-size:var(--font-size-xs);font-weight:600;color:var(--text-secondary);text-transform:uppercase;letter-spacing:.05em;padding:var(--spacing-xs) var(--spacing-sm);background-color:var(--bg-color);border-bottom:1px solid var(--border-color)}.paste-preview{padding:var(--spacing-sm) var(--spacing-md);max-height:160px;overflow-y:auto;font-size:var(--font-size-sm);color:var(--text-color);line-height:1.6;background-color:var(--surface-color)}.paste-preview p{margin:0 0 var(--spacing-sm) 0}.paste-preview p:last-child{margin-bottom:0}.paste-preview h1,.paste-preview h2,.paste-preview h3,.paste-preview h4,.paste-preview h5,.paste-preview h6{margin:0 0 var(--spacing-xs) 0;font-weight:600;color:var(--text-color)}.paste-preview h1{font-size:var(--font-size-lg)}.paste-preview h2{font-size:var(--font-size-base)}.paste-preview h3{font-size:var(--font-size-sm)}.paste-preview ul,.paste-preview ol{margin:0 0 var(--spacing-sm) 0;padding-left:var(--spacing-lg)}.paste-preview code{background-color:var(--bg-color);padding:1px 4px;border-radius:var(--radius-sm);font-size:.9em}.paste-preview pre{background-color:var(--bg-color);padding:var(--spacing-sm);border-radius:var(--radius-sm);overflow-x:auto;font-size:var(--font-size-xs)}.paste-preview blockquote{border-left:3px solid var(--border-color);padding-left:var(--spacing-sm);margin:0 0 var(--spacing-sm) 0;color:var(--text-secondary)}.paste-preview img{max-width:100%;height:auto}.resume-paste-icon{display:inline-block;vertical-align:middle;margin-right:2px;color:var(--primary-color)}.format-plaintext{background-color:#f0f0f0;color:#555}.generate-text-body{margin-top:var(--spacing-sm)}.generate-disabled-notice{display:flex;align-items:center;gap:var(--spacing-sm);padding:var(--spacing-md);background-color:#f9731614;border:1px solid rgba(249,115,22,.25);border-radius:var(--radius-md);color:#c2410c;font-size:var(--font-size-sm);margin-bottom:var(--spacing-md)}.generate-disabled-notice svg{flex-shrink:0}.generate-form{display:flex;flex-direction:column;gap:var(--spacing-sm)}.generate-form.generate-form-disabled{opacity:.5;pointer-events:none}.generate-form-group{display:flex;flex-direction:column;gap:var(--spacing-xs)}.generate-form-group label{font-size:var(--font-size-sm);font-weight:500;color:var(--text-color)}.generate-form-row{display:flex;gap:var(--spacing-sm)}.generate-form-half{flex:1;min-width:0}.generate-description{width:100%;min-height:70px;max-height:160px;padding:var(--spacing-sm) var(--spacing-md);font-size:var(--font-size-sm);font-family:inherit;border:1px solid var(--border-color);border-radius:var(--radius-md);background-color:var(--surface-color);color:var(--text-color);resize:vertical;line-height:1.5}.generate-description:focus{outline:none;border-color:var(--primary-color);box-shadow:0 0 0 3px #4f46e51a}.generate-description::placeholder{color:var(--text-secondary)}.generate-preview-section{margin-top:var(--spacing-md);border:1px solid var(--border-color);border-radius:var(--radius-md);overflow:hidden}.generate-preview-header{padding:var(--spacing-xs) var(--spacing-sm);background-color:var(--bg-color);border-bottom:1px solid var(--border-color)}.generate-preview-label{font-size:var(--font-size-xs);font-weight:600;color:var(--text-secondary);text-transform:uppercase;letter-spacing:.05em}.generate-preview-title{font-size:var(--font-size-sm);font-weight:600;color:var(--text-color);margin-top:2px}.generate-preview{padding:var(--spacing-sm) var(--spacing-md);max-height:200px;overflow-y:auto;font-size:var(--font-size-sm);color:var(--text-color);line-height:1.6;background-color:var(--surface-color)}.generate-preview p{margin:0 0 var(--spacing-sm) 0}.generate-preview p:last-child{margin-bottom:0}.generate-preview h1,.generate-preview h2,.generate-preview h3,.generate-preview h4,.generate-preview h5,.generate-preview h6{margin:0 0 var(--spacing-xs) 0;font-weight:600;color:var(--text-color)}.generate-preview h1{font-size:var(--font-size-lg)}.generate-preview h2{font-size:var(--font-size-base)}.generate-preview h3{font-size:var(--font-size-sm)}.generate-preview ul,.generate-preview ol{margin:0 0 var(--spacing-sm) 0;padding-left:var(--spacing-lg)}.generate-preview blockquote{border-left:3px solid var(--border-color);padding-left:var(--spacing-sm);margin:0 0 var(--spacing-sm) 0;color:var(--text-secondary)}.generate-preview ruby{ruby-position:over}.generate-preview rt{font-size:.6em;color:var(--text-secondary)}.generate-preview-actions{display:flex;gap:var(--spacing-sm);padding:var(--spacing-sm);border-top:1px solid var(--border-color);background-color:var(--bg-color)}.generate-preview-actions .btn{flex:1}.gutenberg-search-section{margin-bottom:var(--spacing-md)}.gutenberg-or-divider{display:flex;align-items:center;gap:var(--spacing-sm);margin:var(--spacing-md) 0;color:var(--text-secondary);font-size:var(--font-size-xs)}.gutenberg-or-divider:before,.gutenberg-or-divider:after{content:"";flex:1;height:1px;background-color:var(--border-color)}.gutenberg-search-results{margin-top:var(--spacing-md);border:1px solid var(--border-color);border-radius:var(--radius-md);background-color:var(--surface-color);max-height:280px;overflow-y:auto}.gutenberg-search-loading{display:flex;align-items:center;justify-content:center;gap:var(--spacing-sm);padding:var(--spacing-lg);color:var(--text-secondary);font-size:var(--font-size-sm)}.gutenberg-search-loading .spinner{width:20px;height:20px}.gutenberg-search-empty{display:flex;flex-direction:column;align-items:center;gap:var(--spacing-sm);padding:var(--spacing-lg);color:var(--text-secondary);text-align:center}.gutenberg-search-empty svg{opacity:.5}.gutenberg-search-empty p{margin:0;font-size:var(--font-size-sm)}.gutenberg-search-header{padding:var(--spacing-sm) var(--spacing-md);background-color:var(--bg-color);border-bottom:1px solid var(--border-color);font-size:var(--font-size-xs);color:var(--text-secondary)}.gutenberg-search-list{display:flex;flex-direction:column}.gutenberg-search-result{display:flex;align-items:center;gap:var(--spacing-sm);padding:var(--spacing-sm) var(--spacing-md);cursor:pointer;transition:background-color .15s ease;border-bottom:1px solid var(--border-color)}.gutenberg-search-result:last-child{border-bottom:none}.gutenberg-search-result:hover{background-color:#4f46e50d}.gutenberg-search-result:active{background-color:#4f46e51a}.gutenberg-search-result .result-icon{flex-shrink:0;width:32px;height:32px;display:flex;align-items:center;justify-content:center;background-color:#4f46e51a;border-radius:var(--radius-sm);color:var(--primary-color)}.gutenberg-search-result .result-info{flex:1;min-width:0;overflow:hidden}.gutenberg-search-result .result-title{font-size:var(--font-size-sm);font-weight:500;color:var(--text-color);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.gutenberg-search-result .result-author{font-size:var(--font-size-xs);color:var(--text-secondary);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.gutenberg-search-result .result-id{flex-shrink:0;font-size:var(--font-size-xs);color:var(--text-secondary);background-color:var(--bg-color);padding:2px 6px;border-radius:var(--radius-sm)}.search-panel{position:fixed;top:0;right:0;bottom:0;width:360px;max-width:90vw;background-color:var(--surface-color);box-shadow:var(--shadow-lg);transform:translate(100%);transition:transform .3s ease;z-index:200;display:flex;flex-direction:column}.search-panel.active{transform:translate(0)}.search-header{flex-shrink:0;padding:var(--spacing-md);border-bottom:1px solid var(--border-color)}.search-input-row{display:flex;align-items:center;gap:var(--spacing-sm);margin-bottom:var(--spacing-sm)}.search-input-wrapper{flex:1;position:relative;display:flex;align-items:center}.search-input-icon{position:absolute;left:10px;color:var(--text-secondary);pointer-events:none}.search-input{width:100%;padding:var(--spacing-sm) var(--spacing-md);padding-left:34px;font-size:var(--font-size-base);border:1px solid var(--border-color);border-radius:var(--radius-md);background-color:var(--surface-color);color:var(--text-color)}.search-input:focus{outline:none;border-color:var(--primary-color);box-shadow:0 0 0 3px #4f46e51a}.search-close-btn{background:none;border:none;color:var(--text-secondary);cursor:pointer;padding:var(--spacing-xs);display:flex;align-items:center;justify-content:center;border-radius:var(--radius-md);transition:background-color .2s ease;flex-shrink:0}.search-close-btn:hover{background-color:var(--bg-color)}.search-options-row{display:flex;align-items:center;gap:var(--spacing-sm)}.search-option{display:inline-flex;align-items:center;gap:4px;padding:2px 8px;border:1px solid var(--border-color);border-radius:var(--radius-sm);cursor:pointer;font-size:var(--font-size-sm);font-weight:600;color:var(--text-secondary);transition:all .15s ease;-webkit-user-select:none;user-select:none}.search-option:hover{border-color:var(--primary-color);color:var(--primary-color)}.search-option-checkbox{display:none}.search-option-checkbox:checked+span{color:var(--primary-color)}.search-option:has(.search-option-checkbox:checked){border-color:var(--primary-color);background-color:#4f46e51a;color:var(--primary-color)}.search-option-word{text-decoration:underline;text-underline-offset:2px}.search-nav-controls{display:flex;align-items:center;gap:var(--spacing-xs);margin-left:auto}.search-nav-btn{display:flex;align-items:center;justify-content:center;width:28px;height:28px;background:none;border:1px solid var(--border-color);border-radius:var(--radius-sm);cursor:pointer;color:var(--text-color);transition:all .15s ease}.search-nav-btn:hover:not(:disabled){border-color:var(--primary-color);color:var(--primary-color)}.search-nav-btn:disabled{opacity:.3;cursor:not-allowed}.search-counter{font-size:var(--font-size-xs);color:var(--text-secondary);white-space:nowrap;min-width:0}.search-progress{padding:var(--spacing-xs) var(--spacing-md);display:flex;align-items:center;gap:var(--spacing-sm);border-bottom:1px solid var(--border-color)}.search-progress-bar{flex:1;height:4px;background-color:var(--border-color);border-radius:2px;overflow:hidden}.search-progress-fill{height:100%;background-color:var(--primary-color);border-radius:2px;transition:width .2s ease;width:0%}.search-progress-text{font-size:var(--font-size-xs);color:var(--text-secondary);white-space:nowrap;flex-shrink:0}.search-results{flex:1;overflow-y:auto;padding:var(--spacing-sm) 0}.search-empty{padding:var(--spacing-xl);text-align:center;color:var(--text-secondary);font-size:var(--font-size-sm);font-style:italic}.search-chapter-group{margin-bottom:var(--spacing-xs)}.search-chapter-header{display:flex;align-items:center;justify-content:space-between;padding:var(--spacing-xs) var(--spacing-md);background-color:var(--bg-color);border-top:1px solid var(--border-color);border-bottom:1px solid var(--border-color);position:sticky;top:0;z-index:1}.search-chapter-title{font-size:var(--font-size-xs);font-weight:600;color:var(--text-secondary);overflow:hidden;text-overflow:ellipsis;white-space:nowrap;flex:1}.search-chapter-count{font-size:var(--font-size-xs);color:var(--text-secondary);background-color:var(--border-color);padding:1px 6px;border-radius:var(--radius-full);flex-shrink:0;margin-left:var(--spacing-sm)}.search-result-item{padding:var(--spacing-sm) var(--spacing-md);cursor:pointer;transition:background-color .15s ease;border-bottom:1px solid var(--border-color)}.search-result-item:last-child{border-bottom:none}.search-result-item:hover{background-color:var(--bg-color)}.search-result-item.active{background-color:#4f46e51a;border-left:3px solid var(--primary-color)}.search-result-snippet{font-size:var(--font-size-sm);color:var(--text-color);line-height:1.5;word-break:break-word}.search-match-highlight{background-color:#fef08a;color:inherit;font-weight:600;padding:1px 2px;border-radius:2px}.search-max-notice{padding:var(--spacing-md);text-align:center;color:var(--text-secondary);font-size:var(--font-size-xs);font-style:italic;border-top:1px solid var(--border-color)}.search-overlay{position:fixed;top:0;right:0;bottom:0;left:0;background-color:#00000080;opacity:0;visibility:hidden;transition:opacity .3s ease,visibility .3s ease;z-index:199}.search-overlay.active{opacity:1;visibility:visible}.sentence .search-highlight{background-color:#facc1566;border-radius:2px;padding:1px 0}.sentence .search-highlight-active{background-color:#f9731680;border-radius:2px;padding:1px 0;outline:2px solid rgba(249,115,22,.6);outline-offset:1px}@media(max-width:480px){.search-panel{width:100%;max-width:100vw}}.lookup-drawer{position:fixed;bottom:0;left:0;right:0;background-color:var(--surface-color);border-top-left-radius:var(--radius-lg);border-top-right-radius:var(--radius-lg);box-shadow:0 -4px 20px #00000026;z-index:600;transform:translateY(100%);transition:transform .3s ease;max-height:60vh;overflow-y:auto}.lookup-drawer.active{transform:translateY(0)}.lookup-drawer-handle{display:flex;justify-content:center;padding:8px 0 4px;cursor:grab}.lookup-drawer-handle-bar{width:40px;height:4px;background-color:var(--border-color);border-radius:2px}.lookup-drawer-content{padding:0 var(--spacing-lg) var(--spacing-lg)}.lookup-drawer-header{margin-bottom:var(--spacing-md)}.lookup-drawer-phrase-row{display:flex;align-items:center;gap:var(--spacing-sm)}.lookup-drawer-phrase{font-size:var(--font-size-xl);font-weight:700;color:var(--text-color)}.lookup-drawer-pronounce-btn{display:flex;align-items:center;justify-content:center;width:32px;height:32px;border:none;border-radius:50%;background-color:var(--primary-color);color:#fff;cursor:pointer;transition:background-color .15s ease;flex-shrink:0}.lookup-drawer-pronounce-btn:hover{background-color:var(--primary-hover)}.lookup-drawer-meta{display:flex;gap:var(--spacing-xs);margin-top:var(--spacing-xs);flex-wrap:wrap}.lookup-drawer-meta span{font-size:var(--font-size-xs);padding:2px 8px;border-radius:var(--radius-sm);background-color:#4f46e51a;color:var(--primary-color)}.lookup-drawer-domain{background-color:#f973161a!important;color:#c2410c!important}.lookup-drawer-body{display:flex;flex-direction:column;gap:var(--spacing-sm)}.lookup-drawer-pronunciation{font-size:var(--font-size-sm);color:var(--text-secondary);font-style:italic}.lookup-drawer-definition,.lookup-drawer-translation{font-size:var(--font-size-base);color:var(--text-color);line-height:1.5}.lookup-drawer-example{font-size:var(--font-size-sm);color:var(--text-secondary)}.lookup-drawer-notes{font-size:var(--font-size-sm);color:var(--text-secondary);padding-top:var(--spacing-xs);border-top:1px solid var(--border-color)}.lookup-drawer-actions{display:flex;justify-content:space-between;align-items:center;margin-top:var(--spacing-md);padding-top:var(--spacing-sm);border-top:1px solid var(--border-color)}.lookup-drawer-history-btn,.lookup-drawer-close-btn{display:flex;align-items:center;gap:var(--spacing-xs);padding:6px 12px;border:1px solid var(--border-color);border-radius:var(--radius-md);background:none;color:var(--text-secondary);cursor:pointer;font-size:var(--font-size-sm);transition:background-color .15s ease}.lookup-drawer-history-btn:hover,.lookup-drawer-close-btn:hover{background-color:var(--bg-color)}.lookup-drawer-loading{display:flex;align-items:center;gap:var(--spacing-sm);padding:var(--spacing-lg) 0;color:var(--text-secondary)}.lookup-drawer-spinner{width:20px;height:20px;border:2px solid var(--border-color);border-top-color:var(--primary-color);border-radius:50%;animation:spin .8s linear infinite}@keyframes spin{to{transform:rotate(360deg)}}.lookup-drawer-error{color:var(--error-color, #dc2626);padding:var(--spacing-sm) 0;font-size:var(--font-size-sm)}.lookup-history-overlay{position:fixed;top:0;left:0;right:0;bottom:0;background-color:#00000080;z-index:700;display:flex;align-items:center;justify-content:center;opacity:0;pointer-events:none;transition:opacity .2s ease}.lookup-history-overlay.active{opacity:1;pointer-events:auto}.lookup-history-dialog{background-color:var(--surface-color);border-radius:var(--radius-lg);width:min(600px,95vw);max-height:85vh;display:flex;flex-direction:column;box-shadow:0 8px 30px #0003}.lookup-history-header{display:flex;align-items:center;justify-content:space-between;padding:var(--spacing-md) var(--spacing-lg);border-bottom:1px solid var(--border-color)}.lookup-history-header h2{font-size:var(--font-size-lg);font-weight:600;margin:0}.lookup-history-close-btn{display:flex;align-items:center;justify-content:center;width:32px;height:32px;border:none;border-radius:var(--radius-md);background:none;color:var(--text-secondary);cursor:pointer;transition:background-color .15s ease}.lookup-history-close-btn:hover{background-color:var(--bg-color)}.lookup-history-search{padding:var(--spacing-sm) var(--spacing-lg);border-bottom:1px solid var(--border-color)}.lookup-history-search-input{width:100%;padding:8px 12px;border:1px solid var(--border-color);border-radius:var(--radius-md);background-color:var(--bg-color);color:var(--text-color);font-size:var(--font-size-sm);outline:none;box-sizing:border-box}.lookup-history-search-input:focus{border-color:var(--primary-color)}.lookup-history-list{flex:1;overflow-y:auto;padding:var(--spacing-md) var(--spacing-lg)}.lookup-history-empty{text-align:center;color:var(--text-secondary);padding:var(--spacing-xl)}.lookup-history-group{margin-bottom:var(--spacing-lg)}.lookup-history-group-header{font-size:var(--font-size-sm);font-weight:600;color:var(--primary-color);padding:var(--spacing-xs) 0;border-bottom:1px solid var(--border-color);margin-bottom:var(--spacing-sm)}.lookup-history-card{border:1px solid var(--border-color);border-radius:var(--radius-md);padding:var(--spacing-sm) var(--spacing-md);margin-bottom:var(--spacing-sm);cursor:pointer;transition:background-color .15s ease,border-color .15s ease}.lookup-history-card:hover{background-color:var(--bg-color)}.lookup-history-card.revealed{border-color:var(--primary-color);background-color:#4f46e508}.lookup-history-card-front{display:flex;flex-direction:column;gap:4px}.lookup-history-card-phrase{font-size:var(--font-size-base);font-weight:600;color:var(--text-color)}.lookup-history-card-meta{display:flex;gap:4px;flex-wrap:wrap}.lookup-history-tag{font-size:11px;padding:1px 6px;border-radius:var(--radius-sm);background-color:#4f46e51a;color:var(--primary-color)}.lookup-history-tag-domain{background-color:#f973161a;color:#c2410c}.lookup-history-card-hint{font-size:var(--font-size-xs);color:var(--text-secondary);font-style:italic;margin-top:2px}.lookup-history-card-back{margin-top:var(--spacing-sm);padding-top:var(--spacing-sm);border-top:1px dashed var(--border-color);display:flex;flex-direction:column;gap:4px}.lookup-history-card-pron{font-size:var(--font-size-sm);color:var(--text-secondary);font-style:italic}.lookup-history-card-def{font-size:var(--font-size-sm);color:var(--text-color);line-height:1.5}.lookup-history-card-trans{font-size:var(--font-size-sm);color:var(--text-color)}.lookup-history-card-example{font-size:var(--font-size-sm);color:var(--text-secondary)}.lookup-history-card-notes{font-size:var(--font-size-xs);color:var(--text-secondary)}.lookup-history-card-actions{display:flex;gap:var(--spacing-sm);margin-top:var(--spacing-sm);padding-top:var(--spacing-xs)}.lookup-history-card-pronounce,.lookup-history-card-delete{display:flex;align-items:center;justify-content:center;width:28px;height:28px;border:1px solid var(--border-color);border-radius:var(--radius-sm);background:none;color:var(--text-secondary);cursor:pointer;transition:background-color .15s ease}.lookup-history-card-pronounce:hover{background-color:#4f46e51a;color:var(--primary-color)}.lookup-history-card-delete:hover{background-color:#dc26261a;color:#dc2626}.lookup-nav-item{cursor:default}.lookup-nav-content{flex:1;min-width:0}.lookup-nav-phrase{font-weight:600;font-size:var(--font-size-sm);color:var(--text-color);display:flex;align-items:center;gap:var(--spacing-xs);flex-wrap:wrap}.lookup-nav-lang{font-size:10px;padding:1px 5px;border-radius:var(--radius-sm);background-color:#4f46e51a;color:var(--primary-color);font-weight:400}.lookup-nav-def{font-size:var(--font-size-xs);color:var(--text-secondary);margin-top:2px;line-height:1.4}@media(max-width:480px){.lookup-drawer{max-height:70vh}.lookup-history-dialog{width:100%;max-width:100vw;max-height:95vh;border-radius:var(--radius-lg) var(--radius-lg) 0 0;margin-top:auto}}@supports (padding-bottom: env(safe-area-inset-bottom)){.lookup-drawer-content{padding-bottom:calc(var(--spacing-lg) + env(safe-area-inset-bottom))}}
