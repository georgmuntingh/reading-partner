class i{constructor(){this._onProgress=null,this._downloadingModels=new Set}onProgress(o){this._onProgress=o}async isModelCached(o){try{if(!("caches"in window))return!1;const e=(await caches.keys()).find(a=>a.includes("transformers")||a.includes("onnx"));if(!e)return!1;const t=await(await caches.open(e)).keys(),r=o.replace("/","%2F");return t.some(a=>a.url.includes(o)||a.url.includes(r))}catch{return!1}}getModelSize(o){return{"onnx-community/whisper-tiny.en":{download:"~75 MB",memory:"~200 MB"},"onnx-community/whisper-base.en":{download:"~150 MB",memory:"~400 MB"},"onnx-community/whisper-small.en":{download:"~470 MB",memory:"~1 GB"},"onnx-community/whisper-tiny":{download:"~75 MB",memory:"~200 MB"},"onnx-community/whisper-base":{download:"~150 MB",memory:"~400 MB"},"HuggingFaceTB/SmolLM2-135M-Instruct":{download:"~100 MB",memory:"~200 MB"},"HuggingFaceTB/SmolLM2-360M-Instruct":{download:"~250 MB",memory:"~400 MB"},"HuggingFaceTB/SmolLM2-1.7B-Instruct":{download:"~925 MB",memory:"~1.5 GB"},"onnx-community/Qwen3-0.6B-ONNX":{download:"~600 MB",memory:"~900 MB"},"onnx-community/Qwen3-1.7B-ONNX":{download:"~850 MB",memory:"~1.3 GB"},"onnx-community/Qwen3-4B-ONNX":{download:"~2 GB",memory:"~3 GB"}}[o]||{download:"Unknown",memory:"Unknown"}}async getStorageUsage(){var o;try{if((o=navigator.storage)!=null&&o.estimate){const n=await navigator.storage.estimate();return{used:this._formatBytes(n.usage||0),available:this._formatBytes(n.quota||0)}}}catch{}return{used:"Unknown",available:"Unknown"}}isDownloading(o){return this._downloadingModels.has(o)}setDownloading(o){this._downloadingModels.add(o)}clearDownloading(o){this._downloadingModels.delete(o)}reportProgress(o,n){var e;(e=this._onProgress)==null||e.call(this,o,n)}_formatBytes(o){if(o===0)return"0 B";const n=1024,e=["B","KB","MB","GB","TB"],s=Math.floor(Math.log(o)/Math.log(n));return parseFloat((o/Math.pow(n,s)).toFixed(1))+" "+e[s]}}const d=new i;export{i as ModelManager,d as modelManager};
